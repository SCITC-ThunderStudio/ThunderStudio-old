/* empty css             *//* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                         */import{h as ie,i as se,j as re}from"./admin-DDF5YkwX.js";import{d as B,t as de,u as ue,k as i,l as pe,x as U,y as ve,r as L,o as C,c as I,a as n,g as e,h as l,f as w,w as N,m as z,b as W,P as me,aS as ce,Q as _e,q as we,a0 as fe,L as A,aM as j,aN as F,aI as M,a1 as S,a2 as G,D as O,z as K,A as be,p as ge,E as xe,B as q}from"./index-x-5zwZLn.js";const ke={class:"weekly-overview-table-container rounded-lg bg-base-100"},ye={class:"weekly-overview-table-title flex h-10 items-center justify-between border-b-2 border-solid border-inherit px-2"},he={class:"hidden items-center max-md:flex"},Ce={class:"flex items-center"},$e={class:"flex items-center max-md:hidden"},Ve={class:"weekly-overview-table h-96 px-2 pt-1"},Ee={class:"weekly-overview-pagination pl-2 max-md:pl-1"},De=B({__name:"WeeklyOverviewTable",setup(P){const{windowWidth:m}=de(ue()),u=i(),p=pe({weeklyId:0,evaluateContent:""}),s=i(0),f=i(!1),o=i(!1),$=i(0),r=i(1),V=i(10),k=i(m.value<=768?5:9),y=i(m.value<=768?"prev, pager, next":"total, prev, pager, next"),c=i(!1),h=i(m.value<=758?"90%":"50%"),b=i(!1);U(()=>{d()}),ve(m,v=>{v<=768?(k.value=5,y.value="prev, pager, next",h.value="90%"):(k.value=9,y.value="total, prev, pager, next",h.value="50%")});const D=()=>{_e.confirm("是否提醒未提交周报人员?","再次确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{}).catch(()=>{})},E=()=>{f.value=!0,setTimeout(()=>{f.value=!1},500),d(s.value,r.value)},d=(v=s.value,t=r.value,_=V.value)=>{o.value=!0,ie(v,t,_).then(g=>{g!==null&&(console.debug("周报记录表格数据",g),u.value=g.tableData,$.value=g.total,r.value=g.currentPage),o.value=!1})},Q=()=>{b.value=!0,se(p).then(v=>{c.value=!v,b.value=!1,v&&d(s.value,r.value)})},H=v=>{const t=void 0+encodeURIComponent(window.btoa(v));window.open(t)};return(v,t)=>{const _=we,g=fe,J=L("ArrowDown"),X=A,T=j,Y=F,Z=M,R=S,ee=G,x=O,te=K,le=be,oe=ge,ne=xe,ae=q;return C(),I("div",ke,[n("div",ye,[e(g,{content:"提醒",placement:"right-start"},{default:l(()=>[e(_,{icon:"Bell",onClick:D,circle:""})]),_:1}),t[13]||(t[13]=n("h1",{class:"text-lg font-semibold"},"周报记录",-1)),n("div",he,[e(Z,{trigger:"click"},{dropdown:l(()=>[e(Y,null,{default:l(()=>[e(T,{onClick:t[0]||(t[0]=a=>d(0,r.value))},{default:l(()=>t[9]||(t[9]=[w("本周")])),_:1}),e(T,{onClick:t[1]||(t[1]=a=>d(1,r.value))},{default:l(()=>t[10]||(t[10]=[w("全部")])),_:1}),e(T,{onClick:E,disabled:f.value},{default:l(()=>t[11]||(t[11]=[w(" 刷新 ")])),_:1},8,["disabled"])]),_:1})]),default:l(()=>[n("span",Ce,[e(X,{size:"20px"},{default:l(()=>[e(J)]),_:1})])]),_:1})]),n("div",$e,[e(ee,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=a=>s.value=a),onChange:t[3]||(t[3]=a=>d(s.value,r.value))},{default:l(()=>[e(R,{label:"本周",value:0}),e(R,{label:"全部",value:1})]),_:1},8,["modelValue"]),e(_,{loading:f.value,class:"ml-2",type:"primary",onClick:E},{default:l(()=>t[12]||(t[12]=[w(" 刷新 ")])),_:1},8,["loading"])])]),n("div",null,[n("div",Ve,[N((C(),z(te,{height:"380px","highlight-current-row":"",stripe:"",data:u.value},{default:l(()=>[e(x,{align:"center",label:"学号","min-width":"90px",prop:"uid"}),e(x,{align:"center",label:"班级","min-width":"95px",prop:"studentClass"}),e(x,{align:"center",label:"姓名","min-width":"70px",prop:"name"}),e(x,{align:"center",label:"文件名","min-width":"90px",prop:"fileName","show-overflow-tooltip":!0}),e(x,{"show-overflow-tooltip":!0,align:"center",label:"提交时间","min-width":"105px",prop:"submitTime",sortable:!s.value},null,8,["sortable"]),e(x,{"show-overflow-tooltip":!0,align:"center",label:"评价",prop:"evaluate",width:"auto"}),e(x,{align:"center",label:"操作","min-width":"100px"},{default:l(a=>[e(_,{icon:W(me),circle:"",type:"primary",onClick:()=>{p.weeklyId=a.row.weeklyId,p.evaluateContent=a.row.evaluate,c.value=!0}},null,8,["icon","onClick"]),e(_,{icon:W(ce),circle:"",type:"success",onClick:je=>H(a.row.filePath)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[ae,o.value]])]),n("div",Ee,[e(le,{"current-page":r.value,"onUpdate:currentPage":t[4]||(t[4]=a=>r.value=a),layout:y.value,"pager-count":k.value,total:$.value,onCurrentChange:t[5]||(t[5]=a=>d(s.value,r.value))},null,8,["current-page","layout","pager-count","total"])])]),e(ne,{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=a=>c.value=a),title:"评价周报",width:h.value},{footer:l(()=>[n("div",null,[e(_,{onClick:t[7]||(t[7]=a=>c.value=!1)},{default:l(()=>t[14]||(t[14]=[w("取消")])),_:1}),e(_,{type:"primary",onClick:Q,loading:b.value},{default:l(()=>t[15]||(t[15]=[w("提交")])),_:1},8,["loading"])])]),default:l(()=>[e(oe,{modelValue:p.evaluateContent,"onUpdate:modelValue":t[6]||(t[6]=a=>p.evaluateContent=a),maxlength:"100",rows:"2","show-word-limit":!0,type:"textarea",resize:"none"},null,8,["modelValue"])]),_:1},8,["modelValue","width"])])}}}),Te={class:"weekly-overview-table-f-container rounded-lg bg-base-100"},Be={class:"weekly-overview-table-f-title flex h-10 items-center justify-between border-b-2 border-solid border-inherit px-2"},Ie={class:"hidden items-center max-md:flex"},Pe={class:"flex items-center"},Re={class:"flex justify-center max-md:hidden"},We={class:"weekly-overview-table-f-table h-64 px-2 pt-1"},Ue=B({__name:"WeeklyOverviewTableF",setup(P){const m=i(),u=i(0),p=i(!1);U(()=>{s()});const s=(f=u.value)=>{p.value=!0,re(f).then(o=>{o!==null&&(console.debug("未提交周报人员名单",o),m.value=o),p.value=!1})};return(f,o)=>{const $=L("ArrowDown"),r=A,V=j,k=F,y=M,c=S,h=G,b=O,D=K,E=q;return C(),I("div",Te,[n("div",Be,[o[6]||(o[6]=n("h1",{class:"text-lg font-semibold"},"未提交周报人员",-1)),n("div",Ie,[e(y,{trigger:"click"},{dropdown:l(()=>[e(k,null,{default:l(()=>[e(V,{onClick:o[0]||(o[0]=d=>s(0))},{default:l(()=>o[4]||(o[4]=[w("本周")])),_:1}),e(V,{onClick:o[1]||(o[1]=d=>s(1))},{default:l(()=>o[5]||(o[5]=[w("上周")])),_:1})]),_:1})]),default:l(()=>[n("span",Pe,[e(r,{size:"20px"},{default:l(()=>[e($)]),_:1})])]),_:1})]),n("div",Re,[e(h,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=d=>u.value=d),onChange:o[3]||(o[3]=d=>s(u.value))},{default:l(()=>[e(c,{label:"本周",value:0}),e(c,{label:"上周",value:1})]),_:1},8,["modelValue"])])]),n("div",We,[N((C(),z(D,{data:m.value,height:"248px"},{default:l(()=>[e(b,{prop:"uid",label:"学号","min-width":"90px",align:"center"}),e(b,{prop:"studentClass",label:"班级","min-width":"95px",align:"center"}),e(b,{prop:"name",label:"姓名",width:"auto",align:"center"})]),_:1},8,["data"])),[[E,p.value]])])])}}}),Le={class:"weekly-overview-container h-full"},Ne={class:"weekly-overview-top flex gap-4 max-md:block"},ze={class:"weekly-overview-top-left w-1/2 max-md:w-full"},Ae={class:"weekly-overview-bottom pt-4"},Ye=B({__name:"WeeklyOverView",setup(P){return(m,u)=>(C(),I("div",Le,[n("div",Ne,[n("div",ze,[e(Ue)]),u[0]||(u[0]=n("div",{class:"weekly-overview-top-right w-1/2 max-md:mt-4 max-md:w-full"},null,-1))]),n("div",Ae,[e(De)])]))}});export{Ye as default};
