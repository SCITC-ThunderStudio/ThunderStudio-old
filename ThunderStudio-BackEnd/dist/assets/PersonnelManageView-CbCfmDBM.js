/* empty css             *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                  *//* empty css                         */import{u as A,c as J,d as Q,e as X,f as Y}from"./admin-DDF5YkwX.js";import{d as P,t as L,u as F,k as i,y as H,o as g,m as y,h as a,a as m,g as e,f,b as M,H as Z,aF as ee,n as N,L as S,M as le,q as R,E as W,l as ae,p as te,K as oe,aG as ne,aH as se,N as ie,x as de,c as ue,w as re,aI as pe,a0 as me,z as ve,A as fe,B as ge,aJ as _e,aK as ce,aL as we,a5 as B,aM as be,aN as xe,D as ye,aO as Ve}from"./index-x-5zwZLn.js";/* empty css                   *//* empty css                    *//* empty css                     *//* empty css                 */import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const De=P({__name:"PersonnelManageUploadDialog",setup(T,{expose:_}){const{windowWidth:U}=L(F()),o=i(),d=i([]),v=i(!1),V=i(U.value<=768?"90%":"40%"),c=i(!1);H(U,t=>{t<=768?V.value="90%":V.value="40%"});const E=t=>{o.value.clearFiles();const n=t[0];n.uid=ee(),o.value.handleStart(n)},u=()=>{if(d.value.length<=0){N.error("请上传训练营名单");return}else if(d.value[0].raw.size/1024/1024>10){N.error("文件大小超过限制,请重新上传");return}else c.value=!0,A(d.value[0].raw).then(t=>{t&&(o.value.clearFiles(),v.value=!1),c.value=!1})};return _({isDialogVisible:v}),(t,n)=>{const r=S,p=le,w=R,k=W;return g(),y(k,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=b=>v.value=b),width:V.value},{footer:a(()=>[m("span",null,[e(w,{onClick:n[1]||(n[1]=b=>v.value=!1)},{default:a(()=>n[5]||(n[5]=[f("取消")])),_:1}),e(w,{loading:c.value,type:"primary",onClick:u},{default:a(()=>n[6]||(n[6]=[f("上传")])),_:1},8,["loading"])])]),default:a(()=>[e(p,{ref_key:"uploadRef",ref:o,"file-list":d.value,"onUpdate:fileList":n[0]||(n[0]=b=>d.value=b),"auto-upload":!1,drag:!0,limit:1,"on-exceed":E,accept:".xls,.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"},{tip:a(()=>n[3]||(n[3]=[m("div",{class:"el-upload__tip"},"仅支持Excel文件,大小限制为10MB",-1)])),default:a(()=>[e(r,{class:"el-icon--upload"},{default:a(()=>[e(M(Z))]),_:1}),n[4]||(n[4]=m("div",{class:"el-upload__text"},[f("拖动或 "),m("em",null,"选择")],-1))]),_:1},8,["file-list"])]),_:1},8,["modelValue","width"])}}}),Ce=P({__name:"PersonnelManageUserInfoDialog",setup(T,{expose:_}){const{windowWidth:U}=L(F()),o=ae({uid:void 0,studentClass:"",sex:"props.UserInfo.sex",name:"",authority:void 0,state:void 0}),d=i(!1),v=i(U.value<=768?"90%":"40%"),V=i(!1),c=()=>{J(o).then(u=>{d.value=!u})};return _({isDialogVisible:d,init:u=>{o.uid=u.uid,o.studentClass=u.studentClass,o.sex=u.sex,o.name=u.name,o.authority=u.authority,o.state=u.state}}),(u,t)=>{const n=te,r=oe,p=ne,w=se,k=ie,b=R,D=W;return g(),y(D,{modelValue:d.value,"onUpdate:modelValue":t[7]||(t[7]=l=>d.value=l),width:v.value,title:"用户信息"},{footer:a(()=>[m("span",null,[e(b,{onClick:t[6]||(t[6]=l=>d.value=!1)},{default:a(()=>t[8]||(t[8]=[f("取消")])),_:1}),e(b,{loading:V.value,type:"primary",onClick:c},{default:a(()=>t[9]||(t[9]=[f("更新")])),_:1},8,["loading"])])]),default:a(()=>[e(k,{model:o,class:"grid grid-cols-2 gap-4"},{default:a(()=>[e(r,{label:"学号",prop:"uid"},{default:a(()=>[e(n,{modelValue:o.uid,"onUpdate:modelValue":t[0]||(t[0]=l=>o.uid=l),disabled:!0},null,8,["modelValue"])]),_:1}),e(r,{label:"班级",prop:"studentClass"},{default:a(()=>[e(n,{modelValue:o.studentClass,"onUpdate:modelValue":t[1]||(t[1]=l=>o.studentClass=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"性别",prop:"sex"},{default:a(()=>[e(w,{modelValue:o.sex,"onUpdate:modelValue":t[2]||(t[2]=l=>o.sex=l)},{default:a(()=>[e(p,{key:"男",value:"男",label:"男"}),e(p,{key:"女",value:"女",label:"女"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"姓名",prop:"name"},{default:a(()=>[e(n,{modelValue:o.name,"onUpdate:modelValue":t[3]||(t[3]=l=>o.name=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"权限",prop:"authority"},{default:a(()=>[e(w,{modelValue:o.authority,"onUpdate:modelValue":t[4]||(t[4]=l=>o.authority=l)},{default:a(()=>[(g(),y(p,{key:0,value:0,label:"管理员"})),(g(),y(p,{key:1,value:1,label:"负责人"})),(g(),y(p,{key:2,value:2,label:"训员"}))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"状态",prop:"state"},{default:a(()=>[e(w,{modelValue:o.state,"onUpdate:modelValue":t[5]||(t[5]=l=>o.state=l)},{default:a(()=>[(g(),y(p,{key:0,value:0,label:"毕业"})),(g(),y(p,{key:1,value:1,label:"在训"})),(g(),y(p,{key:2,value:2,label:"退训"}))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","width"])}}}),Ue=ke(Ce,[["__scopeId","data-v-f70558b3"]]),Ee={class:"personnel-manage-view-header flex h-10 items-center justify-between border-b-2 border-solid border-inherit px-2"},he={class:"flex md:hidden"},Me={class:"flex"},Pe={class:"max-md:hidden"},Le={class:"personnel-manage-view-main px-2 pt-1"},Fe={class:"personnel-manage-view-pagination h-10 py-1 md:pl-2"},je=P({__name:"PersonnelManageView",setup(T){const{windowWidth:_,windowHeight:U}=L(F()),o=i(),d=i(),v=i(),V=i([]),c=i(0),E=i(!1),u=i(_.value<=768?"prev, pager, next":"total, prev, pager, next"),t=i(0),n=i(_.value<=768?10:15),r=i(1),p=i(_.value<=768?5:9);de(()=>{c.value=o.value.clientHeight-42-2-40,k()}),H([_,U],()=>{c.value=o.value.clientHeight-42-2-40,_.value<=768?(u.value="prev, pager, next",n.value=10,p.value=5):(u.value="total, prev, pager, next",n.value=15,p.value=9)});const w=()=>{X()},k=(D=n.value,l=r.value)=>{console.log(l,D),E.value=!0,Q(D,l).then(C=>{C!==null&&(console.debug("人员表格数据",C.tableData),V.value=C.tableData,t.value=C.total,r.value=C.pageNumber),E.value=!1})},b=D=>{Y(D).then(l=>{})};return(D,l)=>{const C=S,$=be,q=xe,G=pe,h=R,z=me,x=ye,I=Ve,K=ve,O=fe,j=ge;return g(),ue("div",{ref_key:"personnelManageViewRef",ref:o,class:"personnel-manage-view-container h-full rounded-lg bg-base-100"},[m("div",Ee,[l[10]||(l[10]=m("h1",{class:"text-lg font-semibold"},"人员管理",-1)),m("div",he,[e(G,{trigger:"click"},{dropdown:a(()=>[e(q,null,{default:a(()=>[e($,{icon:"Upload",onClick:l[0]||(l[0]=s=>d.value.isDialogVisible=!0)},{default:a(()=>l[6]||(l[6]=[f("上传名单 ")])),_:1}),e($,{icon:"Download",onClick:w},{default:a(()=>l[7]||(l[7]=[f("下载模板")])),_:1})]),_:1})]),default:a(()=>[m("span",Me,[e(C,{size:"20px"},{default:a(()=>[e(M(_e))]),_:1})])]),_:1})]),m("div",Pe,[e(z,{content:"上传训练营名单",placement:"top"},{default:a(()=>[e(h,{icon:M(ce),type:"primary",onClick:l[1]||(l[1]=s=>d.value.isDialogVisible=!0)},{default:a(()=>l[8]||(l[8]=[f("上传 ")])),_:1},8,["icon"])]),_:1}),e(z,{content:"下载训练营名单模版",placement:"top"},{default:a(()=>[e(h,{icon:M(we),type:"success",onClick:w},{default:a(()=>l[9]||(l[9]=[f("下载")])),_:1},8,["icon"])]),_:1})])]),m("div",Le,[re((g(),y(K,{data:V.value,height:c.value,"highlight-current-row":"",stripe:""},{default:a(()=>[e(x,{align:"center",label:"学号","min-width":"85px",prop:"uid"}),e(x,{align:"center",label:"班级","min-width":"100px",prop:"studentClass"}),e(x,{align:"center",label:"性别","min-width":"55px",prop:"sex"}),e(x,{align:"center",label:"姓名","min-width":"70px",prop:"name"}),e(x,{align:"center",label:"负责人","min-width":"70px",prop:"principal"}),e(x,{align:"center",label:"做题数",prop:"questionNumber",width:"auto"}),e(x,{align:"center",label:"权限","min-width":"80px"},{default:a(s=>[e(I,{type:s.row.authority===0?"primary":s.row.authority===1?"warning":"success"},{default:a(()=>[f(B(s.row.authority===0?"管理员":s.row.authority===1?"负责人":"训员"),1)]),_:2},1032,["type"])]),_:1}),e(x,{align:"center",label:"状态","min-width":"70px"},{default:a(s=>[e(I,{type:s.row.state===0?"danger":s.row.state===1?"success":"warning"},{default:a(()=>[f(B(s.row.state===0?"退出":s.row.state===1?"在训":"毕业"),1)]),_:2},1032,["type"])]),_:1}),e(x,{align:"center",label:"操作","min-width":"105px"},{default:a(s=>[e(h,{circle:"",icon:"Delete",type:"danger",onClick:Re=>b(s.row.uid)},null,8,["onClick"]),e(h,{circle:"",icon:"Edit",type:"primary",onClick:()=>{v.value.init(s.row),v.value.isDialogVisible=!0}},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[j,E.value]])]),m("div",Fe,[e(O,{"current-page":r.value,"onUpdate:currentPage":l[2]||(l[2]=s=>r.value=s),"page-size":n.value,"onUpdate:pageSize":l[3]||(l[3]=s=>n.value=s),layout:u.value,"page-sizes":[10,15,20,30,40],"pager-count":p.value,total:t.value,onSizeChange:l[4]||(l[4]=s=>k(n.value,void 0)),onCurrentChange:l[5]||(l[5]=s=>k(void 0,r.value))},null,8,["current-page","page-size","layout","pager-count","total"])]),e(De,{ref_key:"PersonnelManageUploadDialogRef",ref:d},null,512),e(Ue,{ref_key:"PersonnelManageUserInfoDialogRef",ref:v},null,512)],512)}}});export{je as default};
